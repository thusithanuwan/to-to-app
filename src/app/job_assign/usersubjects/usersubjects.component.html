<div class="container">
  <!-- Content here -->
  <div class="row">
    <div class="col-md-6">
      <div class="mat-elevation-z8">
        <div class="col-md-12">
          <br>
          <mat-form-field>
            <input matInput (keyup)="searchUser($event.target.value)" type="text" [(ngModel)]="userName"
              placeholder="Search User" />
          </mat-form-field>
        </div>
        <mat-table matSort [dataSource]="dataSource">
          <!-- Position Column -->
          <ng-container matColumnDef="idUser">
            <mat-header-cell mat-sort-header *matHeaderCellDef> # </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.idUser}} </mat-cell>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="user_full_name">
            <mat-header-cell mat-sort-header *matHeaderCellDef> Name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.user_full_name}} </mat-cell>
          </ng-container>


          <!-- Name Column -->
          <ng-container matColumnDef="user_nic">
            <mat-header-cell mat-sort-header *matHeaderCellDef> NIC </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.user_nic}} </mat-cell>
          </ng-container>


          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectedUser(row)"></mat-row>
        </mat-table>
        <mat-paginator [pageSizeOptions]="[6,12,24]" showFirstLastButtons></mat-paginator>
      </div>
    </div>


    <!-- Card ------------------------------------------------------------------ -->

    <div class="col-md-6">
      <mat-card>
        <mat-card-title>Assign User to Subject</mat-card-title>
        <mat-card-subtitle>Select user, department and subject to assign</mat-card-subtitle>
        <mat-card-content>
          <h4>{{uname}}</h4>
          <h5>{{nic}}</h5>
          <mat-form-field>
            <mat-label>Department</mat-label>
            <mat-select [(ngModel)]="dipid" aria-required="" (selectionChange)="loadSubject($event.value)">
              <div *ngFor="let item of departmentArray">
                <mat-option value="{{item.idDipartment}}">{{item.dip_name}}</mat-option>
              </div>
            </mat-select>
          </mat-form-field>
          <br><br>
          <mat-form-field>
            <mat-label>Subjects</mat-label>
            <mat-select [(ngModel)]="subid" aria-required="">
              <div *ngFor="let item of subjectArray">
                <mat-option value="{{item.idSubject}}">{{item.subject_name}}</mat-option>
              </div>
            </mat-select>
          </mat-form-field>

        </mat-card-content>
        <mat-card-actions align="end">
          <button mat-raised-button color="primary" (click)="userAsseignToSubject()" type="submit">Assign User</button>
        </mat-card-actions>
      </mat-card>
    </div>


  </div>

  <div class="row">
    <div class="col-md-12">
      <br><br>
      <div class="mat-elevation-z8">
        <div class="col-md-12">
          <br>
          <mat-form-field>
            <input matInput (keyup)="filterAllTable($event.target.value)" type="text" placeholder="Search User" />
          </mat-form-field>
        </div>

        <mat-table matSort [dataSource]="suDataSource">

           <!-- Name Column -->
           <ng-container matColumnDef="dip_name">
              <mat-header-cell mat-sort-header *matHeaderCellDef> Department </mat-header-cell>
              <mat-cell *matCellDef="let element"> {{element.dip_name}} </mat-cell>
            </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="user_full_name">
            <mat-header-cell mat-sort-header *matHeaderCellDef> Name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.user_full_name}} </mat-cell>
          </ng-container>


          <!-- Name Column -->
          <ng-container matColumnDef="user_nic">
            <mat-header-cell mat-sort-header *matHeaderCellDef> NIC </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.user_nic}} </mat-cell>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="subject_name">
            <mat-header-cell mat-sort-header *matHeaderCellDef> Subjects </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.subject_name}} </mat-cell>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="subject_code">
            <mat-header-cell mat-sort-header *matHeaderCellDef> Subject Code </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{element.subject_code}} </mat-cell>
          </ng-container>

          <!-- Position Column -->
          <ng-container matColumnDef="idUser_has_subject">
            <mat-header-cell mat-sort-header *matHeaderCellDef> Remove </mat-header-cell>
            <mat-cell *matCellDef="let element">

              <button mat-raised-button color="accent" value="{{element.idUser_has_subject}}" (click)="remove(element)">
                Remove
              </button>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="suDisplayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: suDisplayedColumns;"></mat-row>
        </mat-table>
        <mat-paginator [pageSizeOptions]="[6,12,24]" showFirstLastButtons></mat-paginator>
      </div>
    </div>
  </div>


</div>
